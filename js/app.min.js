function shuffle(e){let t,s,n=e.length;for(;0!==n;)s=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[s],e[s]=t;return e}function startGame(){openedCards=[],cards=shuffle(cards);for(let e=0;e<cards.length;e++)deck.innerHTML="",[].forEach.call(cards,function(e){deck.appendChild(e)}),cards[e].classList.remove("show","open","match","disabled");moves=0,counter.innerHTML=moves;for(let e=0;e<stars.length;e++)stars[e].style.color="#FFD700",stars[e].style.visibility="visible";second=0,minute=0,hour=0;let e=document.querySelector(".timer");e.innerHTML="0 mins 0 secs",clearInterval(interval)}function cardOpen(){openedCards.push(this);var e=openedCards.length;2===e&&(moveCounter(),openedCards[0].type===openedCards[1].type?matched():unmatched())}function matched(){openedCards[0].classList.add("match","disabled"),openedCards[1].classList.add("match","disabled"),openedCards[0].classList.remove("show","open","no-event"),openedCards[1].classList.remove("show","open","no-event"),openedCards=[]}function unmatched(){openedCards[0].classList.add("unmatched"),openedCards[1].classList.add("unmatched"),disable(),setTimeout(function(){openedCards[0].classList.remove("show","open","no-event","unmatched"),openedCards[1].classList.remove("show","open","no-event","unmatched"),enable(),openedCards=[]},1100)}function disable(){Array.prototype.filter.call(cards,function(e){e.classList.add("disabled")})}function enable(){Array.prototype.filter.call(cards,function(e){e.classList.remove("disabled");for(var t=0;t<matchedCard.length;t++)matchedCard[t].classList.add("disabled")})}function moveCounter(){if(moves++,counter.innerHTML=moves,1===moves&&(second=0,minute=0,hour=0,startTimer()),moves>15&&moves<19)for(let e=0;e<3;e++)e>1&&(stars[e].style.visibility="collapse");else if(moves>20)for(let e=0;e<3;e++)e>0&&(stars[e].style.visibility="collapse")}function startTimer(){interval=setInterval(function(){timer.innerHTML=minute+"mins "+second+"secs",second++,60===second&&(minute++,second=0),60===minute&&(hour++,minute=0)},1e3)}function congratulations(){if(16===matchedCard.length){clearInterval(interval),finalTime=timer.innerHTML,modal.classList.add("show");const e=document.querySelector(".stars").innerHTML;document.getElementById("finalMove").innerHTML=moves,document.getElementById("starRating").innerHTML=e,document.getElementById("totalTime").innerHTML=finalTime,closeModal()}}function closeModal(){closeicon.addEventListener("click",function(e){modal.classList.remove("show"),startGame()})}function playAgain(){modal.classList.remove("show"),startGame()}let card=document.getElementsByClassName("card"),cards=[...card];const deck=document.getElementById("card-deck");let moves=0,counter=document.querySelector(".moves");const stars=document.querySelectorAll(".fa-star");let matchedCard=document.getElementsByClassName("match"),starsList=document.querySelectorAll(".stars li"),closeicon=document.querySelector(".close"),modal=document.getElementById("popup1"),openedCards=[],second=0,minute=0;hour=0;let interval,timer=document.querySelector(".timer");document.body.onload=startGame();const displayCard=function(){this.classList.toggle("open"),this.classList.toggle("show"),this.classList.toggle("disabled")};for(let e=0;e<cards.length;e++)card=cards[e],card.addEventListener("click",displayCard),card.addEventListener("click",cardOpen),card.addEventListener("click",congratulations);document.getElementById("restartBtn").onclick=function(){startGame()},document.getElementById("playAgain").onclick=function(){startGame()};